<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      >
    <h:head>
        <title>Recommandation engine | Home Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <h:outputStylesheet name="css/organism.css"/>
        <h:outputStylesheet name="css/skeleton.css"/>
        <h:outputScript  name="js/jquery.min.js" />
        <h:outputScript  name="js/scripts.js" />
    </h:head>
    <h:body>
        <c:if test="${empty userEntityController.selected}">
           <h:link outcome="/" />
        </c:if>
        <!--<c:if test ="${not empty userEntityController.selected.email}">-->
        <ui:include src="./../header.xhtml" />
            <div class="container">
                <div class="row">
                    <h3><span class="icon-search"></span> Search for a product</h3>
                    <h:form class="row">
                        <h:inputText class="seven columns" p:type="text" p:name="name" />
                        <h:commandLink class="three columns button-primary" action="#{userEntityController.search}" value="search"></h:commandLink>
                        <h:link class="two columns advanced" outcome="/public/customSearch" value="Advanced"/>
                    </h:form>
                </div>
                <div class="row ">
                    <section class="four columns">
                        <h3>Auctions</h3>
                        <a class="button button-primary" href="#">Create an auction</a>
                        <a class="button button" href="#">View all auctions you have bid</a>
                        <a class="button button" href="#">View all your auctions</a>
                        <a class="button button" href="#">View all your ended auctions</a>
                        <a class="button button" href="#">Browse to all active auctions</a>
                        <a class="button button" href="#">Browse to all ended auctions</a>
                    </section>
                    <section class="search eight columns">
                        <h3>Recommendations</h3>
                        <c:if test="${not empty recommendationLst}">
                            <c:forEach var="auction" items="${recommendationLst}" varStatus="status">
                                <div class="row c-result">
                                    <div class="two columns">
                                        <c:if test="${not empty auction.images}">
                                            <img class="img-resp" src="/image_auction/${auction.images.iterator().next().imageFileName}"/>
                                        </c:if>
                                        <c:if test="${empty auction.images}">
                                <span class="icon-picture c-result__no-img">
                                    no image set
                                </span>
                                        </c:if>
                                    </div>
                                    <div class="seven columns">
                                        <h6>${fn:replace(auction.name, fn:substring(auction.name, 60, fn:length(auction.name)), '...')}</h6>
                                        <c:if test="${empty auction.description}">
                                            <p class="c-result--empty">No description provided</p>
                                        </c:if>
                                        <c:if test="${not empty auction.description}">
                                            <p>${fn:replace(auction.description, fn:substring(auction.description, 80, fn:length(auction.description)), '...')}</p>
                                        </c:if>
                                    </div>
                                    <div class="three columns"><a class="button button-primary" href="#">View auction</a></div>
                                </div>

                            </c:forEach>
                        </c:if>
                        <c:if test="${empty recommendationLst}">
                            We have no recommendations for you. Try placing some bids and we will take care of it.
                        </c:if>
                    </section>
                </div>
                <br/>
                <br/>
                <br/>
                <div>
                    <div class="row ">
                        <section>
                        </section>
                    </div>
                </div>
            </div>
        <!--</c:if>-->
<!--        <c:if test ="${empty userEntityController.selected.email}">
            <h3>You are logged out</h3>
            <p>Please go to the <a href="/">start page</a> and login again.</p>
        </c:if>-->
    </h:body>
</html>
